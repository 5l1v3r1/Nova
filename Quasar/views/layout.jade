doctype 5
html(lang="en")
  head
    meta(charset="utf-8")
    link(rel="stylesheet", type="text/css", href="style.css", media="screen")
    link(rel="stylesheet", type="text/css", href="/dojo/dijit/themes/claro/claro.css", media="screen")
    link(rel="shortcut icon", href="/favicon.ico")

    script(type="text/javascript", src="/nowjs/now.js")
    script(type="text/javascript", src="/dojo/dojo/dojo.js", data-dojo-config="async:true, parseOnLoad:true")
    script
      // This function should be replaced in other jade files, and will be called when the DOM is ready
      function init() {};
    
    block headerAdditions

    script
      require(["dijit/layout/BorderContainer", "dijit/layout/TabContainer", "dijit/layout/ContentPane", "dijit/form/Button", "dojo/parser", "dojo/domReady!", "dojo"],
        function(){
          dojo.addOnLoad(function(){
            // Some logging of nowjs stuff
            now.core.on('disconnect', function() {console.log('Warning: Disconnected from nowjs server.');});
            
            dojo.style("appLayout", "opacity", 0);
            dojo.fadeOut({node:"splash", delay:0}).play();
            dojo.style("appLayout", "visibility", "visible");
            dojo.fadeIn({node:"appLayout", delay:0}).play();

            var sideBarButtons = document.getElementsByClassName("sideBarButton");
            for (var i in sideBarButtons) {
                if (!sideBarButtons[i].pathname) {
                    continue;
                }
                
                if (sideBarButtons[i].pathname == window.location.pathname) {
                    sideBarButtons[i].className += ' active';
                    console.log("Enabled button " + sideBarButtons[i]);
                }
            }
          });

          init();
        }
      );

  body.claro
    div#splash(style="position:absolute;left:0px;top:0px;width:100%;height:100%; text-align: center;")
    div#appLayout.demoLayout(data-dojo-type="dijit.layout.BorderContainer", data-dojo-props="design: 'headline', region: 'center'", style="visibility: hidden")
      div.centerPanel(data-dojo-type="dijit.layout.ContentPane", data-dojo-props="region: 'center', tabPosition: 'bottom'")
        div(data-dojo-type="dijit.layout.ContentPane",title="Nova", data-dojo-props="splitter: false")
          block content
      // Header panel
      div.edgePanel(data-dojo-type="dijit.layout.ContentPane", data-dojo-props="region: 'top', splitter: false")
        div(data-dojo-type="dijit.layout.BorderContainer",data-dojo-props="design: 'sidebar', splitter: false",style="height: 140px;")
          // Header center
          div(data-dojo-type="dijit.layout.ContentPane", data-dojo-props="region: 'center', splitter: false")    
            a(href="/")
              img#eyeIcon(src="images/novaIcon.png",class="align-left", width="100px", height="100px")
              h1 DataSoft Nova Anti-reconnaissance System
            block topPannelAdditions
    
      // Left panel
      div#leftCol.edgePanel(data-dojo-type="dijit.layout.ContentPane", data-dojo-props="region: 'left', splitter: false")
        block buttonPannelAdditions
      
       
        div.sideBarHeader Status
          a.sideBarButton(href='/suspects') Current Suspects
          a.sideBarButton(href='/events') Hostile Events
          a.sideBarButton(href= "/haystackStatus") Haystack Details
        
        div.sideBarHeader Logs
          a.sideBarButton(href= "/novadlog") Nova Log
          a.sideBarButton(href= "/honeydlog") Haystack Log
       
        div.sideBarHeader Configuration
          a.sideBarButton(href= "/basicOptions") Basic Options
          a.sideBarButton(href= "/advancedOptions") Advanced Options
          a.sideBarButton(href= "/interfaceAliases") Interface Aliases
          a.sideBarButton(href= "/configWhitelist") Whitelist
       
        div.sideBarHeader Haystack Settings
          a.sideBarButton(href= "/honeydConfigManage") Presets
          a.sideBarButton(href= "/autoConfig") Autoconfiguration
          a.sideBarButton(href= "/configHoneydProfiles") Profiles
          a.sideBarButton(href= "/configHoneydNodes") Nodes
          a.sideBarButton(href= "/scripts")  Scripts
        
        div.sideBarHeader Training
          a.sideBarButton(href= "/customizeTraining") Training Data
        
        div.sideBarHeader Users
          a.sideBarButton(href= "/createNewUser") New User
          a.sideBarButton(href= "/editUsers") Edit User
        
        div.sideBarHeader Documentation
          a.sideBarButton(href='/about') About
        
