DIR="$( cd "$( dirname "$0" )" && pwd )"

cd $HOME/Code/Nova/NovaLibrary/Debug/
make
cd $HOME/Code/Nova/ClassificationEngine/Debug/
make
cd $HOME/Code/Nova/DoppelgangerModule/Debug/
make
cd $HOME/Code/Nova/Haystack/Debug/
make
cd $HOME/Code/Nova/LocalTrafficMonitor/Debug/
make

cd $DIR

mkdir bin
cp $HOME/Code/Nova/NovaGUI/NovaGUI bin/NovaGUI
cp $HOME/Code/Nova/ClassificationEngine/Debug/ClassificationEngine bin/ClassificationEngine
cp $HOME/Code/Nova/DoppelgangerModule/Debug/DoppelgangerModule bin/DoppelgangerModule
cp $HOME/Code/Nova/Haystack/Debug/Haystack bin/Haystack
cp $HOME/Code/Nova/LocalTrafficMonitor/Debug/LocalTrafficMonitor bin/LocalTrafficMonitor

chmod -R a+rw bin

#Copy the Log4cxx config xml files, and rename them

mkdir .nova/Config

cp $HOME/Code/Nova/ClassificationEngine/Config/Log4cxxConfig.xml .nova/Config/Log4cxxConfig.xml
cp .nova/Config/Log4cxxConfig.xml $HOME/Code/Nova/DoppelgangerModule/Config/Log4cxxConfig.xml
cp .nova/Config/Log4cxxConfig.xml $HOME/Code/Nova/Haystack/Config/Log4cxxConfig.xml
cp .nova/Config/Log4cxxConfig.xml $HOME/Code/Nova/LocalTrafficMonitor/Config/Log4cxxConfig.xml
cp .nova/Config/Log4cxxConfig.xml $HOME/Code/Nova/NovaGUI/Config/Log4cxxConfig.xml

cp $HOME/Code/Nova/ClassificationEngine/Config/Log4cxxConfig_Console.xml .nova/Config/Log4cxxConfig_Console.xml
cp .nova/Config/Log4cxxConfig_Console.xml $HOME/Code/Nova/DoppelgangerModule/Config/Log4cxxConfig_Console.xml
cp .nova/Config/Log4cxxConfig_Console.xml $HOME/Code/Nova/Haystack/Config/Log4cxxConfig_Console.xml
cp .nova/Config/Log4cxxConfig_Console.xml $HOME/Code/Nova/LocalTrafficMonitor/Config/Log4cxxConfig_Console.xml
cp .nova/Config/Log4cxxConfig_Console.xml $HOME/Code/Nova/NovaGUI/Config/Log4cxxConfig_Console.xml

#Copy all the Nova config files
cp $HOME/Code/Nova/ClassificationEngine/Config/NOVAConfig.txt .nova/Config/NOVAConfig.txt
cp .nova/Config/NOVAConfig.txt $HOME/Code/Nova/DoppelgangerModule/Config/NOVAConfig.txt
cp .nova/Config/NOVAConfig.txt $HOME/Code/Nova/Haystack/Config/NOVAConfig.txt
cp .nova/Config/NOVAConfig.txt $HOME/Code/Nova/LocalTrafficMonitor/Config/NOVAConfig.txt
cp .nova/Config/NOVAConfig.txt $HOME/Code/Nova/NovaGUI/Config/NOVAConfig.txt

#Honeyd Config files.
cp $HOME/Code/Nova/Haystack/Config/haystack.config .nova/Config/haystack.config
cp $HOME/Code/Nova/DoppelgangerModule/Config/doppelganger.config .nova/Config/doppelganger.config

chmod -R a+rw .nova/Config

#Classification database
mkdir .nova/Data
cp $HOME/Code/Nova/ClassificationEngine/Config/data.txt .nova/Data/data.txt
chmod -R a+rw .nova/Data

echo "Nova Installer Updated From Source"
